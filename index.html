
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>AdhanSalat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <h1>ðŸ•Œ AdhanSalat - Horaires de priÃ¨re</h1>
  <label>Latitude : <input id="lat" type="number" value="43.61" step="0.01" /></label><br>
  <label>Longitude : <input id="lon" type="number" value="3.87" step="0.01" /></label><br>
  <label>Angle Fajr : <input id="fajr" type="number" value="18" /></label><br>
  <label>Angle Isha : <input id="isha" type="number" value="17" /></label><br>
  <label>OU Ã©cart Isha (minutes) : <input id="ishaInterval" type="number" value="0" /></label><br><br>
  <button onclick="calculate()">Calculer</button>

  <h2>Horaires :</h2>
  <ul id="times"></ul>

  <script src="adhan.js"></script>
  <script>
    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    function calculate() {
      const lat = parseFloat(document.getElementById("lat").value);
      const lon = parseFloat(document.getElementById("lon").value);
      const fajrAngle = parseFloat(document.getElementById("fajr").value);
      const ishaAngle = parseFloat(document.getElementById("isha").value);
      const ishaInterval = parseInt(document.getElementById("ishaInterval").value);

      const coordinates = new adhan.Coordinates(lat, lon);
      const params = new adhan.CalculationParameters("Other", fajrAngle, ishaAngle);
      params.madhab = adhan.Madhab.Shafi;

      if (ishaInterval > 0) {
        params.ishaAngle = 0;
        params.ishaInterval = ishaInterval;
      }

      const date = new Date();
      const prayerTimes = new adhan.PrayerTimes(coordinates, date, params);

      const times = {
        Fajr: formatTime(prayerTimes.fajr),
        Sunrise: formatTime(prayerTimes.sunrise),
        Dhuhr: formatTime(prayerTimes.dhuhr),
        Asr: formatTime(prayerTimes.asr),
        Maghrib: formatTime(prayerTimes.maghrib),
        Isha: formatTime(prayerTimes.isha)
      };

      const list = document.getElementById("times");
      list.innerHTML = "";
      for (const [name, time] of Object.entries(times)) {
        const li = document.createElement("li");
        li.textContent = `${name} : ${time}`;
        list.appendChild(li);
      }
    }

    window.onload = calculate;
  </script>
</body>
</html>
